{# Declaring Variables #}
  {% set iframeList = [] %} {# For Iframe Showing Logic #}
  {% set dynamicSidebarList = [] %} {# For Home tab right sidebar Logic #}
  {% set dynamicRouteList = [] %} {# Main Sidebar Routing List #}
  {# ======================Home Tab logic Goes Here ==================== #}
  {% if module.add_home_tab %}
    {# Home tab Right Sidebar  Add logic #}
  {% if module.home.add_right_sidebar %}
  {% for item in module.home.right_sidebar_object %}
    {# Iframe popup Logic #}
    {% do iframeList.append({
    label: module.home.tab_name,
    tabName: module.home.tab_name,
    showIframe: item.show_iframe,
    propertyName: item.property_name,
    iframeProperties: item.iframe_properties,
    hubspotObjectTypeId: item.object_type_id,
    }) %}
    {# End Iframe popup Logic #}
    {# Right sidebar Tabs and item route list #}
    {% set objName = item.list_object_name | replace("p_","") %}
    {% do dynamicSidebarList.append({
    label: item.list_object_name,
    icon: item.icon_svg_code,
    showIframe: item.show_iframe,
    propertyName: item.property_name,
    iframeProperties: item.iframe_properties,
    listObjectName: item.list_object_name,
    listObjectProperties: item.list_object_properties,
    associateObjectName: item.association_object_name,
    hubspotObjectId: item.association_object_type_id,
    hubspotObjectTypeId: item.object_type_id,
    associateObjectProperties: item.association_object_properties,
    companyAsMediator: item.mediator_object_type_id,
    pipeLineId: item.pipeline_id,
    specPipeLine: item.add_specific_pipeline,
    objectType: "HUBSPOT_DEFINED",
    }) %}
    {% endfor %}
  {% endif %}
  {#End  Home tab Right Sidebar  Add logic #}
  {# Main sidebar home tab logic #}
      {% do dynamicRouteList.append({
      tabName: module.home.tab_name,
      homeCardsView:module.home.view,
      icon: module.home.icon_svg_code,
      }) %}
  {# Main sidebar home tab logic #}
  {% endif %}
  {# ======================Home Tab logic Ends Here ==================== #}
  {# ======================Logic for hubspot defined object =============== #}
  {% if module.menu_options.hubspot_defined_object %}
  {% for item in module.menu_options.objects %}
  {% do iframeList.append({
  label: item.list_object_name,
  tabName: item.tab_name,
  showIframe: item.show_iframe,
  propertyName: item.property_name,
  iframeProperties: item.iframe_properties,
  hubspotObjectTypeId: item.object_type_id,
  }) %}
  {% set objName = item.list_object_name | replace("p_","") %}
  {% do dynamicRouteList.append({
  label: item.list_object_name,
  objectDescription: item.object_description,
  objectUserProperties: item.properties,
  objectUserPropertiesView: item.view,
  icon: item.icon_svg_code,
  showIframe: item.show_iframe,
  propertyName: item.property_name,
  iframeProperties: item.iframe_properties,
  listObjectName: item.list_object_name,
  listObjectProperties: item.list_object_properties,
  associateObjectName: item.association_object_name,
  hubspotObjectId: item.association_object_type_id,
  hubspotObjectTypeId: item.object_type_id,
  associateObjectProperties: item.association_object_properties,
  companyAsMediator: item.mediator_object_type_id,
  pipeLineId: item.pipeline_id,
  specPipeLine: item.add_specific_pipeline,
  objectType: "HUBSPOT_DEFINED",
  }) %}
  {% endfor %}
  {% endif %}
  {# =======================End  Logic for hubspot defined object =====================#}
  {# Logic for Custom defined object #}
  {% if module.menu_options.hubspot_custom_object %}
  {% for item in module.menu_options.hubspot_custom_objects %}
  {% do iframeList.append({
  label: item.list_object_name,
  tabName: item.tab_name,
  showIframe: item.show_iframe,
  propertyName: item.property_name,
  iframeProperties: item.iframe_properties,
  hubspotObjectTypeId: item.object_type_id,
  }) %}
  {% set objName = item.list_object_name | replace("p_","") %}
  {% do dynamicRouteList.append({
  label: item.list_object_name,
  objectDescription: item.object_description,
  objectUserProperties: item.properties,
  objectUserPropertiesView: item.view,
  icon: item.icon_svg_code,
  showIframe: item.show_iframe,
  propertyName: item.property_name,
  iframeProperties: item.iframe_properties,
  listObjectName: item.list_object_name,
  listObjectProperties: item.list_object_properties,
  associateObjectName: item.association_object_name,
  hubspotObjectId: item.association_object_type_id,
  hubspotObjectTypeId: item.object_type_id,
  associateObjectProperties: item.association_object_properties,
  companyAsMediator: item.mediator_object_type_id,
  pipeLineId: item.pipeline_id,
  specPipeLine: item.add_specific_pipeline,
  objectType: "USER_DEFINED",
  }) %}
  {% endfor %}
  {% endif %}



  {# ================== End Logic for Custom defined object ===========================#}
  <script>
  {# Declaring Global Variables to accessible in App #}
  const dataSourceSet = false;
  const hubId = "{{ portal_id }}";
  const apiBaseUrlOption = "{{ module.backend_server_url }}";  {# Backend server URL #}
  const userData = {{ loggedInUser | tojson | safe }}; {# Logedin user details #}
  const objectList = {{ objectList | tojson | safe }}; {# Objects Data #}
  const showCompanyNameOption = {{ module.other_options.company_options.show_company_name }}; {# Brand name showing Boolean #}
  const showSidebarCtaOption = {{ module.other_options.show_sidebar_cta }}; {# Sidebar cta showing Boolean #}
  const addHomeTabOption = {{ module.add_home_tab }}; {# Home tab adding Boolean #}
  const sidebarMenuOptions = {{ dynamicRouteList | tojson | safe }}; {# Setting sidebar route list data #}
  const moduleIframeListOptions = {{ iframeList | tojson | safe }}; {# Setting Iframe logic data #}
  const sidebarListDataOption = {{ dynamicSidebarList | tojson | safe }}; {# Setting home tab right sidebar list data #}
  const showSidebarListDataOption = {{ module.home.add_right_sidebar }}; {# Boolean for home tab right sidebar list data  #}
  
    let CTA = `
    {% set href = module.other_options.sidebar_cta_details.button_url.url.href %}
    {% if module.other_options.sidebar_cta_details.button_url.url.type is equalto "EMAIL_ADDRESS" %}
      {% set href = "mailto:" + href %}
    {% elif module.other_options.sidebar_cta_details.button_url.url.type is equalto "PHONE_NUMBER" %}
      {% set href = "tel:" + href %}
    {% endif %}
    <a
      {% if module.other_options.sidebar_cta_details.button_url.url.type is equalto "CALL_TO_ACTION"  %}
        href="{{ href }}" {# The href here is not escaped as it is not editable and functions as a JavaScript call to the associated CTA #}
      {% else %}
        href="{{ href|escape_url }}"
      {% endif %}
      {% if module.other_options.sidebar_cta_details.button_url.open_in_new_tab %}
        target="_blank"
      {% endif %}
      {% if module.other_options.sidebar_cta_details.button_url.rel %}
        rel="{{ module.other_options.sidebar_cta_details.button_url.rel|escape_attr }}"
      {% endif %}
      >
      {{ module.other_options.sidebar_cta_details.button_text }}
    </a>
    `;
    
  {# Sidebar Cta data #}
      const sidebarCtaDetails = {
      title: "{{ module.other_options.sidebar_cta_details.title }}",
      htmlForCta: CTA ,
    };
  {#End Sidebar Cta data #}

  let createAccountCta = `
    {% set href = module.other_options.create_an_account_link.url.href %}
    {% if module.other_options.create_an_account_link.url.type is equalto "EMAIL_ADDRESS" %}
      {% set href = "mailto:" + href %}
    {% elif module.other_options.create_an_account_link.url.type is equalto "PHONE_NUMBER" %}
      {% set href = "tel:" + href %}
    {% endif %}
    <a
      {% if module.other_options.create_an_account_link.url.type is equalto "CALL_TO_ACTION"  %}
        href="{{ href }}" {# The href here is not escaped as it is not editable and functions as a JavaScript call to the associated CTA #}
      {% else %}
        href="{{ href|escape_url }}"
      {% endif %}
      {% if module.other_options.create_an_account_link.open_in_new_tab %}
        target="_blank"
      {% endif %}
      {% if module.other_options.create_an_account_link.rel %}
        rel="{{ module.other_options.create_an_account_link.rel|escape_attr }}"
      {% endif %}
      >
      Sign up
    </a>
  `

  {# Branding Data #}
    const baseCompanyOptions = {
      logoImg: "{{ module.other_options.company_options.logo.src|escape_url }}",
      companyName: "{{ module.other_options.company_options.company_name }}",
      smallLogo: "{{ module.other_options.company_options.small_logo.src|escape_url }}",
      authPopupFormLogo: "{{ module.other_options.company_options.auth_popup_form_logo.src|escape_url }}",
      welcomeMessage: "{{ module.other_options.welcome_message }}",
      createAccountBool:{{ module.other_options.show_create_an_account_link }},
      createAccountLink:createAccountCta,
    };
  {# end branding data #}
    
  {# Home banner data #}
      const enableDashboardCards = {{ module.home.enable_dashboard_cards }};
      const dashboardCards = {{ module.home.dashboard_cards | tojson | safe }}; 
      const homeTabsDataTypeFilter = {{ module.home.tabs_data_type | tojson | safe  }};
  {# End Home banner data #}

    {# Module Custom Styles #}
    const moduleStylesOptions = {
      homeTabStyles: {
        headingColor: "{{ module.style.home_tab_styles.home_tab_banner_text_color.color }}",
        descriptionColor: "{{ module.style.home_tab_styles.description_color.color }}",
        buttonStyles: {
          backgroundColor: "{{ module.style.home_tab_styles.button_styles.background_color.color }}",
          textColor: "{{ module.style.home_tab_styles.button_styles.text_color.color }}",
        },
        overlayer: {
          color: "{{ module.style.home_tab_styles.banner_overlayer_color.color }}",
          opacity: "{{ module.style.home_tab_styles.banner_overlayer_color.opacity }}",
        },
       svgColor: {
          color: "{{ module.style.home_tab_styles.user_card_svg_color.color }}",
          opacity: "{{ module.style.home_tab_styles.user_card_svg_color.opacity }}",
        }
      },
      sidebarStyles: {
        textColor: "{{ module.style.sidebar_styles.text_color.color }}",
        backgroundColor: "{{ module.style.sidebar_styles.sidebar_background_color.color }}", 
      },
      detailsPageStyles: {
        textColor: "{{ module.style.details_page_styles.text_color.color }}",
        bannerColors: {
          color1: "{{ module.style.details_page_styles.banner_background_options.banner_color_1.color }}",
          color2: "{{ module.style.details_page_styles.banner_background_options.banner_color_2.color }}",
        }
      },
      creatButtonStyles: {
        backgroundColor: "{{ module.style.table_record_creation_button.background_color.color }}",
        textColor: "{{ module.style.table_record_creation_button.text_color.color }}",
      },
      rightTables:{
        backgroundColor: "{{ module.style.d_h_sidebar.background_color.rgba }}",
        cardBackgroundColor: "{{ module.style.d_h_sidebar.card_background_color.rgba }}",
        textColor: "{{ module.style.d_h_sidebar.text_color.rgba }}",
      },
        noteStyle:{
          hsBg:"{{ module.style.note_cards.hs_note_card_bg_color.color }}",
          hsText:"{{ module.style.note_cards.hs_note_ts_text_color.color }}",
          wpBg:"{{ module.style.note_cards.wp_note_card_bg_color.color }}",
          wpText:"{{ module.style.note_cards.wp_note_ts_text_color.color }}",
        }
    }
    const recorBtnCustom = moduleStylesOptions.creatButtonStyles.backgroundColor && moduleStylesOptions.creatButtonStyles.textColor ? true : false;
    const sidebarCtaStyles = {
        backgroundColor:"{{ module.style.sidebar_cta.background_color.rgba }}",
        textColor: "{{ module.style.sidebar_cta.text_color.rgba }}",
        buttonBackgroundColor:"{{ module.style.sidebar_cta.button_background_color.color }}",
        buttonTextColor: "{{ module.style.sidebar_cta.button_text_color.rgba }}"
    }
    const developerModeModule = {{ module.developerMode }};

  {# Module Custom Styles #}
  </script>
  <style>
  :root {
    --primary-color: {{ module.style.module_global_colors.primary_color.color }} ;
    --secondary-color: {{ module.style.module_global_colors.secondary_color.color }} ;
    --primary-color-hover-bg: {{ module.style.module_global_colors.primary_color.color }}30 ;
    --secondary-color-hover-bg: {{ module.style.module_global_colors.secondary_color.color }}30 ;
    --banner-overlayer-color: {{ module.style.module_global_colors.primary_color.color }}10 ; 
    --home-tab-heading-color:  {{ module.style.home_tab_styles.home_tab_banner_text_color.color }} ;
    --home-tab-description-color:  {{ module.style.home_tab_styles.description_color.color }} ;
    --home-tab-button-background-color:  {{ module.style.home_tab_styles.button_styles.background_color.color }} ;
    --home-tab-button-text-color:  {{ module.style.home_tab_styles.button_styles.text_color.color }} ;
    --home-tab-overlayer-color:  {{ module.style.home_tab_styles.banner_overlayer_color.rgba }} ;
    --home-tab-overlayer-opacity:  {{ module.style.home_tab_styles.banner_overlayer_color.opacity }} ;
    --home-tab-svg-color:   {{ module.style.home_tab_styles.user_card_svg_color.color }} ;
    --home-tab-svg-opacity:  {{ module.style.home_tab_styles.user_card_svg_color.opacity }} ;

    --sidebar-text-color:  {{ module.style.sidebar_styles.text_color.color }} ;
    --sidebar-background-color:  {{ module.style.sidebar_styles.sidebar_background_color.color }} ;

    --details-page-text-color:  {{ module.style.details_page_styles.text_color.color }} ;
    --details-page-banner-color1:  {{ module.style.details_page_styles.banner_background_options.banner_color_1.color }} ;
    --details-page-banner-color2:  {{ module.style.details_page_styles.banner_background_options.banner_color_2.color }} ;

    --create-button-background-color:  {{ module.style.table_record_creation_button.background_color.color }} ;
    --create-button-text-color:  {{ module.style.table_record_creation_button.text_color.color }} ;

    --right-tables-background-color:   {{ module.style.d_h_sidebar.background_color.rgba }} ;
    --right-tables-card-background-color:  {{ module.style.d_h_sidebar.card_background_color.rgba }} ;
    --right-tables-text-color:   {{ module.style.d_h_sidebar.text_color.rgba }} ;

    --note-hs-bg:  {{ module.style.note_cards.hs_note_card_bg_color.color }} ;
    --note-hs-text:  {{ module.style.note_cards.hs_note_ts_text_color.color }} ;
    --note-wp-bg:  {{ module.style.note_cards.wp_note_card_bg_color.color }} ;
    --note-wp-text:  {{ module.style.note_cards.wp_note_ts_text_color.color }} ;

    --sidebarCta-background-color:  {{ module.style.sidebar_cta.background_color.rgba }} ;
    --sidebarCta-text-color:   {{ module.style.sidebar_cta.text_color.rgba }} ;
    --sidebarCta-button-background-color:  {{ module.style.sidebar_cta.button_background_color.color }} ;
    --sidebarCta-button-text-color: {{ module.style.sidebar_cta.button_text_color.rgba }} ;
  }
  .bg-custom-gradient{
    background-image: linear-gradient(194deg, var(--details-page-banner-color2) 0%, var(--details-page-banner-color1) 72%);
  }
</style>
 {% require_css %}
  <style>
  {% scope_css %}
  p{
    margin: 0 !important;
  }
  ul, ol {
    margin: 0;
    padding: 0;
}
  {% end_scope_css %}
    </style>
  {% end_require_css %}
  <script>
    window.hubSpotData = {
        dataSourceSet,
        hubId,
        apiBaseUrlOption,
        userData,
        objectList,
        showCompanyNameOption,
        showSidebarCtaOption,
        addHomeTabOption,
        sidebarMenuOptions,
        moduleIframeListOptions,
        sidebarListDataOption,
        showSidebarListDataOption,
        sidebarCtaDetails,
        baseCompanyOptions,
        enableDashboardCards,
        dashboardCards,
        homeTabsDataTypeFilter,
        moduleStylesOptions,
        recorBtnCustom,
        sidebarCtaStyles,
        developerModeModule,
    }
  </script>
<div id="app"></div>